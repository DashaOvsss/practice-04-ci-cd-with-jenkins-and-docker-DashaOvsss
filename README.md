[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-22041afd0340ce965d47ae6ef1cefeee28c7c493a6346c4f15d667ab976d596c.svg)](https://classroom.github.com/a/lJeYtCKD)
# –ü—Ä–∞–∫—Ç–∏–∫–∞ 04: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CI/CD –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ Jenkins —Ç–∞ Docker

## –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–ø–∏—Å

__–ú–µ—Ç–∞__: –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –∑–±–∏—Ä–∞–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–æ–¥–∞—Ç–∫—É, –Ω–∞–ø–∏—Å–∞–Ω–æ–≥–æ –Ω–∞ –º–æ–≤—ñ Go, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ Jenkins —Ç–∞ Docker.

–ü—Ä–æ—î–∫—Ç –º–∞—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –æ—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏:
- `go.mod` - –º–µ—Ç–∞–¥–∞–Ω—ñ Go –º–æ–¥—É–ª—è
- `src/go/main.go` - –∫–æ–¥ –¥–æ–¥–∞—Ç–∫–∞
- `src/go/main_test.go` - —é–Ω—ñ—Ç —Ç–µ—Å—Ç –¥–æ–¥–∞—Ç–∫–∞
- `Dockerfile` - —à–∞–±–ª–æ–Ω —Å–∫—Ä—ñ–ø—Ç–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker –æ–±—Ä–∞–∑—É, —è–∫–∏–π –≤–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–ø–æ–≤–Ω–∏—Ç–∏.
- `Jenkinsfile` - —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø–∞–π–ø–ª–∞–π–Ω—É Jenkins, —è–∫–∏–π –≤–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–ø–æ–≤–Ω–∏—Ç–∏.

–í–∞—à Jenkinsfile –ø–æ–≤–∏–Ω–µ–Ω –≤–∫–ª—é—á–∞—Ç–∏ –µ—Ç–∞–ø–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, —é–Ω—ñ—Ç-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker –æ–±—Ä–∞–∑—É, –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—ó –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤.

## –ó–∞–ø—É—Å–∫ Jenkins

> [!IMPORTANT]  
> –î–ª—è —Ä–æ–±–æ—Ç–∏ Jenkins –∑ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—î–º –≤–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É –¥–æ GitHub. –í—ñ–Ω –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å –∑–∞–º—ñ—Å—Ç—å –ø–∞—Ä–æ–ª—è.
>  
> –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —è–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É [–∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens)

–î–ª—è –∑–∞–ø—É—Å–∫—É Jenkins –º–æ–∂–Ω–∞ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—å –ø—Ä–æ—î–∫—Ç–æ–º [Jenkins Playground](https://gitlab.com/DmyMi/ita-jenkins-playground) —ñ Docker Compose.

–°–∫–ª–æ–Ω—É–π—Ç–µ —Å–æ–±—ñ –ø—Ä–æ—î–∫—Ç, –ø—ñ—Å–ª—è —á–æ–≥–æ —É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É —ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
sudo docker compose up
```

–ü–æ—á–µ–∫–∞–≤—à–∏ 2-5 —Ö–≤–∏–ª–∏–Ω, –¥–æ Jenkins –º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º [http://localhost:80/login](http://localhost:80/login) (–∞–±–æ –Ü–† –∞–¥—Ä–µ—Å–∞ –≤–∞—à–æ—ó –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ—ó –º–∞—à–∏–Ω–∏).

–õ–æ–≥—ñ–Ω `admin`, –ø–∞—Ä–æ–ª—å `test`.

> [!NOTE]  
> –£ –≤–∞—Å –ø–æ–≤–∏–Ω–µ–Ω –≤–∂–µ –±—É—Ç–∏ –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ Linux & Docker.

–ü—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Pipeline –ø—Ä–æ—î–∫—Ç—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∏–±—Ä–∞—Ç–∏ __Pipeline script fromSCM__.
–í —è–∫–æ—Å—Ç—ñ SCM –≤–∏–±—Ä–∞—Ç–∏ Git —Ç–∞ –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π. –í–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ —Å—Ö–æ–∂—É –ø–æ–º–∏–ª–∫—É —è–∫ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω—Ü—ñ.

–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `Add -> Jenkins`.

![](./images/token1.png)

–£ –Ω–æ–≤–æ–º—É –≤—ñ–∫–Ω—ñ –¥–æ–¥–∞–π—Ç–µ `Username and password` —Å–µ–∫—Ä–µ—Ç.

> [!IMPORTANT]
> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É –∑–∞–º—ñ—Å—Ç—å –ø–∞—Ä–æ–ª—è.

![](./images/token2.png)

–ü–æ–≤–µ—Ä–Ω—É–≤—à–∏—Å—å –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –µ–∫—Ä–∞–Ω, –≤–∏–±–µ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Å–µ–∫—Ä–µ—Ç –∑ –º–µ–Ω—é `Credentials`.

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ –≥—ñ–ª–∫–∞ –≤–∏–±—Ä–∞–Ω–∞ `*/main`

![](./images/token3.png)

## –ó–∞–≤–¥–∞–Ω–Ω—è
### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Dockerfile

–í—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –ø—Ä–æ–ø–∏—Å–∞–Ω—ñ –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö —É —à–∞–±–ª–æ–Ω—ñ [Dockerfile](./Dockerfile).

–û—Å–Ω–æ–≤–Ω—ñ —É–º–æ–≤–∏:
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø—É—Å—Ç—É —Ñ–∞–π–ª–æ–≤—É —Å–∏—Å—Ç–µ–º—É (–æ–±—Ä–∞–∑ `scratch` —è–∫–∏–π –º–∞—î 0 –±–∞–π—Ç).
- –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ build argument `APP_NAME` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ —ñ–º–µ–Ω—ñ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫–∞.

> [!NOTE]  
> –í —à–∞–±–ª–æ–Ω—ñ `Jenkinsfile` –≤–∂–µ —î –≤—Å–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–µ, —â–æ–± –¥–æ–¥–∞—Ç–æ–∫ –ø—Ä–∞—Ü—é–≤–∞–≤ –∑ –ø—É—Å—Ç–æ—é —Ñ–∞–π–ª–æ–≤–æ—é —Å–∏—Å—Ç–µ–º–æ—é.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Jenkinsfile

–í—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –ø—Ä–æ–ø–∏—Å–∞–Ω—ñ –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö —É —à–∞–±–ª–æ–Ω—ñ [Jenkinsfile](./Jenkinsfile).

–û–ø–∏—Å –æ—Å–Ω–æ–≤–Ω–∏—Ö –µ—Ç–∞–ø—ñ–≤:
- –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:
  - –í–∞—à Jenkinsfile –ø–æ–≤–∏–Ω–µ–Ω –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è –∑ –∫—Ä–æ–∫—É –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è –≤–∞—à–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –∑ –¥–æ–¥–∞—Ç–∫–æ–º.
    –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ URL –≤–∞—à–æ–≥–æ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –ø—Ä–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—ñ –º—ñ—Å—Ü—è, –∑–≤—ñ–¥–∫–∏ Jenkins –±—É–¥–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ Jenkinsfile.
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker –æ–±—Ä–∞–∑—É –¥–ª—è –º–æ–≤–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è Go:
  - –Ø–∫ –∞–≥–µ–Ω—Ç–∞ Jenkins –≤ –µ—Ç–∞–ø–∞—Ö –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Docker –æ–±—Ä–∞–∑ –¥–ª—è –º–æ–≤–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è Go.
    –¶–µ–π –æ–±—Ä–∞–∑ –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –æ–±—Ä–∞–∑ golang –Ω–∞ Docker Hub –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –ø—ñ–¥ —Ü–µ–π –æ–ø–∏—Å.
- –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ç–∞ —é–Ω—ñ—Ç-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
  - –î–æ–¥–∞–π—Ç–µ –µ—Ç–∞–ø–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó –¥–ª—è –ø—Ä–æ–µ–∫—Ç—É (–≤–∂–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ —à–∞–±–ª–æ–Ω—ñ üôÇ) —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ —é–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏ ([—Ü–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è](https://stackoverflow.com/questions/16935965/how-to-run-test-cases-in-a-specified-file) –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ üôÇ).
- –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –∫—Ä–æ–∫–∏: –ê—Ä—Ö—ñ–≤–∞—Ü—ñ—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker –æ–±—Ä–∞–∑—É:
  - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –∫—Ä–æ–∫–∏, –¥–æ–¥–∞–π—Ç–µ –¥–≤–∞ –ø—ñ–¥–∫—Ä–æ–∫–∏: "–ê—Ä—Ö—ñ–≤–∞—Ü—ñ—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É" —Ç–∞ "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker –æ–±—Ä–∞–∑—É".
  - –ê—Ä—Ö—ñ–≤–∞—Ü—ñ—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É:
    - –°—Ç–≤–æ—Ä—ñ—Ç—å tar-–∞—Ä—Ö—ñ–≤ (tar.gz) —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É.
    - –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—é —Ç—ñ–ª—å–∫–∏ —É –≤–∏–ø–∞–¥–∫—É —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –µ—Ç–∞–ø—ñ–≤.
  - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Docker –æ–±—Ä–∞–∑—É:
    - –°—Ç–≤–æ—Ä—ñ—Ç—å Dockerfile, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î –∞—Ä–≥—É–º–µ–Ω—Ç `APP_NAME` —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –π–æ–≥–æ –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–æ–ø–∏—Å–∞–Ω–æ –≤–∏—â–µ).
    - –í –ø–∞–π–ø–ª–∞–π–Ω—ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å Docker –æ–±—Ä–∞–∑, –ø–µ—Ä–µ–¥–∞—é—á–∏ –∞—Ä–≥—É–º–µ–Ω—Ç `APP_NAME` –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤—à–∏ –∑–º—ñ–Ω–Ω—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –∑ —Ç–∞–∫–∏–º —Å–∞–º–∏–º —ñ–º º—è–º.